NOTE: For continuous integration periods where only master is
      built, see the on-demand-master-only branch in this repository

0/ run install_mirror.sh xxxxx (xxxx being your login @ git.moodle.org)
   (this only needs to be done the 1st time)

1a/ for all the branches >= 20_STABLE && master, pull changes from:
   git://git.moodle.cz/moodle-install.git (install_xxxxx branches match)
   and push them to integration. Some day we'll automate this.

1b/ for all the branches >= 2.4 && master, execute the CLI script:
     php theme/base/cli/svgtool.php --ie9fix
     (you will need to specify also --path= if it's not a moodle configured site)

   It will add some tags to all svgs missing them in order to bring svg
   compatibility with IE9. Verify changes (preserveAspectRatio="xMinYMid meet" added)
   and commit. If for some reason some svg in core must not be processed, there is one
   blacklist in the cli script. Amend & commit it to exclude that svg for next executions.
   More info: http://tracker.moodle.org/browse/MDL-36436

2/ for all the branches >= 20_STABLE && master, fix all permission
   using the fixpermissions.php in integration

A) STEPS FOR MAJOR RELEASE GO HERE!!! (follow them if necessary, step 3 below
   is not needed in major releases for master, but for the rest of stables that
   will be a normal weekly builds)

3/ a) update version.php of all changed branches and push to integration
    Messages use to be:
      - weekly release x.y[.z+|dev] (on normal weeklies)
      - on-demand release x.y[beta|rc1…] (for continuous integration periods - master only)
      - emergency release x.y[.z+|dev|beta|rc1…] (for any emergency release)
      - Moodle release x.y[.z|beta|rc1|..] (for any major/minor/beta/rc release)

3/ b) Wait for the CI server to finish executing all the integration checks!

3/ c) [If necessary] Tags will be created and pushed to integration.

   NOTE: Since Moodle 2.2.2 (March 2012) we have agreed to tag always on packaging and, if some (rare)
   emergency build is needed, it's ok to produce a new package with the 3rd digit in the version
   incremented. Link: http://moodle.org/local/chatlogs/index.php?conversationid=9717#c338379

   To create tags - on minor release, betas and rcs, pointing to the version.php
   commit with: git tag -a vX.Y.Z[-beta|-rcN] -m MOODLE_XY[Z|_BETA|_RCN] <COMMITID> -

4/ Spread changes in integration to moodle.git and mirrors using ./gitmirror.sh

NOTE: Steps 5-9 will be out from the process on 20121231 (end of 2012). CVS is death!
NOTE: There is no MOODLE_24_STABLE branch in CVS since 20121203. So next steps don't apply o it.

5/ be sure that all cvsmoodleXX dirs are updated (cvs -q update -dP)

6/ sync CVS using the ./cvsmirror.sh script

7/ verify prepared CVS commits. The ./checkcvsmirror.sh script can be executed to achieve that.

8/ commit to CVS, with commit message being:
    - weekly cvs snapshot (on normal weeklies)
    - on-demand cvs snapshot (on continuous integration periods
    - emergency cvs snapshot (on emergency changes)
    - X.Y.Z cvs snapshot (on minor release)
    - X.Y cvs snapshot (on major release)
    - X.Ybeta cvs snapshot (on beta release)
    - X.YrcZ cvs snapshot (on rc release)
9/ tag each cvs branch with corresponding:
    - MOODLE_XY_WEEKLY (on weekly, emergency & major/minor releases, not in HEAD!)
    - MOODLE_XYZ (on minor release)
    - MOODLE_XY (on major release)
    - MOODLE_XY_BETA (on beta releases)
    - MOODLE_XY_RCZ (on release candidate releases)

10/ close all issues in Tracker (reseting linked MDLQA ones if existing)

11/ annotate the number of closed issues & the number of reopened ones
    (Tracker - CI - Count reopened issues) in the sheet.

12/ add one entry @ http://moodle.org/mod/forum/view.php?f=1153 commenting
    about numbers, major ones, special thanks...
